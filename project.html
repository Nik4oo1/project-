<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞ —Å–∏—Å—Ç–µ–º–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1.1em;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .content {
            padding: 30px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .form-section h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #495057;
        }

        input, select {
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        th, td {
            padding: 15px;
            text-align: left;
        }

        tbody tr {
            border-bottom: 1px solid #dee2e6;
            transition: all 0.3s;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        .status-free {
            background: #d4edda;
            color: #155724;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: 600;
        }

        .status-borrowed {
            background: #f8d7da;
            color: #721c24;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: 600;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 0.9em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .stat-card h4 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card p {
            font-size: 1.1em;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö –ë–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞ —Å–∏—Å—Ç–µ–º–∞</h1>
            <p>–£—á–∏–ª–∏—â–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–Ω–∏–≥–∏ –∏ —á–∏—Ç–∞—Ç–µ–ª–∏</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="showTab('dashboard')">–¢–∞–±–ª–æ</button>
            <button class="tab" onclick="showTab('books')">–ö–Ω–∏–≥–∏</button>
            <button class="tab" onclick="showTab('readers')">–ß–∏—Ç–∞—Ç–µ–ª–∏</button>
            <button class="tab" onclick="showTab('borrow')">–ó–∞–µ–º–∞–Ω–µ/–í—Ä—ä—â–∞–Ω–µ</button>
        </div>

        <div class="content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="stats">
                    <div class="stat-card">
                        <h4 id="totalBooks">0</h4>
                        <p>–û–±—â–æ –∫–Ω–∏–≥–∏</p>
                    </div>
                    <div class="stat-card">
                        <h4 id="availableBooks">0</h4>
                        <p>–ù–∞–ª–∏—á–Ω–∏ –∫–Ω–∏–≥–∏</p>
                    </div>
                    <div class="stat-card">
                        <h4 id="borrowedBooks">0</h4>
                        <p>–ó–∞–µ—Ç–∏ –∫–Ω–∏–≥–∏</p>
                    </div>
                    <div class="stat-card">
                        <h4 id="totalReaders">0</h4>
                        <p>–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–∏ —á–∏—Ç–∞—Ç–µ–ª–∏</p>
                    </div>
                </div>

                <h3>–ü–æ—Å–ª–µ–¥–Ω–æ –∑–∞–µ—Ç–∏ –∫–Ω–∏–≥–∏</h3>
                <table id="recentBorrowsTable">
                    <thead>
                        <tr>
                            <th>–ó–∞–≥–ª–∞–≤–∏–µ</th>
                            <th>–ê–≤—Ç–æ—Ä</th>
                            <th>–ß–∏—Ç–∞—Ç–µ–ª</th>
                            <th>–ö–ª–∞—Å</th>
                        </tr>
                    </thead>
                    <tbody id="recentBorrowsBody">
                    </tbody>
                </table>
            </div>

            <!-- Books Tab -->
            <div id="books" class="tab-content">
                <div class="form-section">
                    <h3>–î–æ–±–∞–≤–∏ –Ω–æ–≤–∞ –∫–Ω–∏–≥–∞</h3>
                    <form id="bookForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–µ–Ω –Ω–æ–º–µ—Ä *</label>
                                <input type="text" id="bookId" required>
                            </div>
                            <div class="form-group">
                                <label>–ê–≤—Ç–æ—Ä *</label>
                                <input type="text" id="bookAuthor" required>
                            </div>
                            <div class="form-group">
                                <label>–ó–∞–≥–ª–∞–≤–∏–µ *</label>
                                <input type="text" id="bookTitle" required>
                            </div>
                            <div class="form-group">
                                <label>–ò–∑–¥–∞—Ç–µ–ª—Å—Ç–≤–æ *</label>
                                <input type="text" id="bookPublisher" required>
                            </div>
                            <div class="form-group">
                                <label>–ì–æ–¥–∏–Ω–∞ –Ω–∞ –∏–∑–¥–∞–≤–∞–Ω–µ *</label>
                                <input type="number" id="bookYear" min="1800" max="2025" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏ –∫–Ω–∏–≥–∞</button>
                    </form>
                </div>

                <div class="search-box">
                    <input type="text" id="searchBooks" placeholder="üîç –¢—ä—Ä—Å–∏ –∫–Ω–∏–≥–∏ –ø–æ –∑–∞–≥–ª–∞–≤–∏–µ, –∞–≤—Ç–æ—Ä –∏–ª–∏ –∏–∑–¥–∞—Ç–µ–ª—Å—Ç–≤–æ...">
                </div>

                <table id="booksTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–ê–≤—Ç–æ—Ä</th>
                            <th>–ó–∞–≥–ª–∞–≤–∏–µ</th>
                            <th>–ò–∑–¥–∞—Ç–µ–ª—Å—Ç–≤–æ</th>
                            <th>–ì–æ–¥–∏–Ω–∞</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–ó–∞–µ—Ç–∞ –æ—Ç</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="booksBody">
                    </tbody>
                </table>
            </div>

            <!-- Readers Tab -->
            <div id="readers" class="tab-content">
                <div class="form-section">
                    <h3>–î–æ–±–∞–≤–∏ –Ω–æ–≤ —á–∏—Ç–∞—Ç–µ–ª</h3>
                    <form id="readerForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–µ–Ω –Ω–æ–º–µ—Ä *</label>
                                <input type="text" id="readerId" required>
                            </div>
                            <div class="form-group">
                                <label>–ò–º–µ *</label>
                                <input type="text" id="readerFirstName" required>
                            </div>
                            <div class="form-group">
                                <label>–§–∞–º–∏–ª–∏—è *</label>
                                <input type="text" id="readerLastName" required>
                            </div>
                            <div class="form-group">
                                <label>–ö–ª–∞—Å *</label>
                                <input type="number" id="readerGrade" min="1" max="12" required>
                            </div>
                            <div class="form-group">
                                <label>–ü–∞—Ä–∞–ª–µ–ª–∫–∞ *</label>
                                <input type="text" id="readerClass" maxlength="1" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏ —á–∏—Ç–∞—Ç–µ–ª</button>
                    </form>
                </div>

                <div class="search-box">
                    <input type="text" id="searchReaders" placeholder="üîç –¢—ä—Ä—Å–∏ —á–∏—Ç–∞—Ç–µ–ª–∏ –ø–æ –∏–º–µ –∏–ª–∏ –∫–ª–∞—Å...">
                </div>

                <table id="readersTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–ò–º–µ</th>
                            <th>–§–∞–º–∏–ª–∏—è</th>
                            <th>–ö–ª–∞—Å</th>
                            <th>–ó–∞–µ—Ç–∏ –∫–Ω–∏–≥–∏</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="readersBody">
                    </tbody>
                </table>
            </div>

            <!-- Borrow/Return Tab -->
            <div id="borrow" class="tab-content">
                <div class="form-section">
                    <h3>–ó–∞–µ–º–∞–Ω–µ –Ω–∞ –∫–Ω–∏–≥–∞</h3>
                    <form id="borrowForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>–ò–∑–±–µ—Ä–∏ –∫–Ω–∏–≥–∞ *</label>
                                <select id="borrowBookSelect" required>
                                    <option value="">-- –ò–∑–±–µ—Ä–∏ –∫–Ω–∏–≥–∞ --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–ò–∑–±–µ—Ä–∏ —á–∏—Ç–∞—Ç–µ–ª *</label>
                                <select id="borrowReaderSelect" required>
                                    <option value="">-- –ò–∑–±–µ—Ä–∏ —á–∏—Ç–∞—Ç–µ–ª --</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-success">–ó–∞–µ–º–∏ –∫–Ω–∏–≥–∞</button>
                    </form>
                </div>

                <h3>–ó–∞–µ—Ç–∏ –∫–Ω–∏–≥–∏</h3>
                <table id="borrowedBooksTable">
                    <thead>
                        <tr>
                            <th>ID –ö–Ω–∏–≥–∞</th>
                            <th>–ó–∞–≥–ª–∞–≤–∏–µ</th>
                            <th>–ê–≤—Ç–æ—Ä</th>
                            <th>–ß–∏—Ç–∞—Ç–µ–ª</th>
                            <th>–ö–ª–∞—Å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="borrowedBooksBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        let books = [];
        let readers = [];

        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'dashboard') updateDashboard();
            if (tabName === 'borrow') updateBorrowSelects();
        }

        document.getElementById('bookForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const book = {
                id: document.getElementById('bookId').value,
                author: document.getElementById('bookAuthor').value,
                title: document.getElementById('bookTitle').value,
                publisher: document.getElementById('bookPublisher').value,
                year: document.getElementById('bookYear').value,
                available: true,
                borrowedBy: null
            };
            
            if (books.find(b => b.id === book.id)) {
                alert('–ö–Ω–∏–≥–∞ —Å —Ç–æ–∑–∏ ID –≤–µ—á–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!');
                return;
            }
            
            books.push(book);
            this.reset();
            displayBooks();
            alert('–ö–Ω–∏–≥–∞—Ç–∞ –µ –¥–æ–±–∞–≤–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
        });

        document.getElementById('readerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const reader = {
                id: document.getElementById('readerId').value,
                firstName: document.getElementById('readerFirstName').value,
                lastName: document.getElementById('readerLastName').value,
                grade: document.getElementById('readerGrade').value,
                class: document.getElementById('readerClass').value.toUpperCase()
            };
            
            if (readers.find(r => r.id === reader.id)) {
                alert('–ß–∏—Ç–∞—Ç–µ–ª —Å —Ç–æ–∑–∏ ID –≤–µ—á–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!');
                return;
            }
            
            readers.push(reader);
            this.reset();
            displayReaders();
            alert('–ß–∏—Ç–∞—Ç–µ–ª—è—Ç –µ –¥–æ–±–∞–≤–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
        });

        document.getElementById('borrowForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const bookId = document.getElementById('borrowBookSelect').value;
            const readerId = document.getElementById('borrowReaderSelect').value;
            
            const book = books.find(b => b.id === bookId);
            const reader = readers.find(r => r.id === readerId);
            
            if (book && reader) {
                book.available = false;
                book.borrowedBy = readerId;
                this.reset();
                displayBooks();
                displayBorrowedBooks();
                updateBorrowSelects();
                alert(`–ö–Ω–∏–≥–∞—Ç–∞ "${book.title}" –µ –∑–∞–µ—Ç–∞ –æ—Ç ${reader.firstName} ${reader.lastName}`);
            }
        });

        function displayBooks(filter = '') {
            const tbody = document.getElementById('booksBody');
            tbody.innerHTML = '';
            
            const filtered = books.filter(b => 
                b.title.toLowerCase().includes(filter.toLowerCase()) ||
                b.author.toLowerCase().includes(filter.toLowerCase()) ||
                b.publisher.toLowerCase().includes(filter.toLowerCase())
            );
            
            filtered.forEach(book => {
                const reader = readers.find(r => r.id === book.borrowedBy);
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${book.id}</td>
                    <td>${book.author}</td>
                    <td>${book.title}</td>
                    <td>${book.publisher}</td>
                    <td>${book.year}</td>
                    <td><span class="${book.available ? 'status-free' : 'status-borrowed'}">
                        ${book.available ? '–°–≤–æ–±–æ–¥–Ω–∞' : '–ó–∞–µ—Ç–∞'}
                    </span></td>
                    <td>${reader ? reader.firstName + ' ' + reader.lastName : '-'}</td>
                    <td class="action-buttons">
                        <button class="btn btn-danger btn-sm" onclick="deleteBook('${book.id}')">–ò–∑—Ç—Ä–∏–π</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function displayReaders(filter = '') {
            const tbody = document.getElementById('readersBody');
            tbody.innerHTML = '';
            
            const filtered = readers.filter(r => 
                r.firstName.toLowerCase().includes(filter.toLowerCase()) ||
                r.lastName.toLowerCase().includes(filter.toLowerCase()) ||
                (r.grade + r.class).includes(filter)
            );
            
            filtered.forEach(reader => {
                const borrowedCount = books.filter(b => b.borrowedBy === reader.id).length;
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${reader.id}</td>
                    <td>${reader.firstName}</td>
                    <td>${reader.lastName}</td>
                    <td>${reader.grade}${reader.class}</td>
                    <td>${borrowedCount}</td>
                    <td class="action-buttons">
                        <button class="btn btn-danger btn-sm" onclick="deleteReader('${reader.id}')">–ò–∑—Ç—Ä–∏–π</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function displayBorrowedBooks() {
            const tbody = document.getElementById('borrowedBooksBody');
            tbody.innerHTML = '';
            
            const borrowed = books.filter(b => !b.available);
            
            borrowed.forEach(book => {
                const reader = readers.find(r => r.id === book.borrowedBy);
                if (reader) {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${book.id}</td>
                        <td>${book.title}</td>
                        <td>${book.author}</td>
                        <td>${reader.firstName} ${reader.lastName}</td>
                        <td>${reader.grade}${reader.class}</td>
                        <td>
                            <button class="btn btn-warning btn-sm" onclick="returnBook('${book.id}')">–í—ä—Ä–Ω–∏</button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                }
            });
        }

        function updateBorrowSelects() {
            const bookSelect = document.getElementById('borrowBookSelect');
            const readerSelect = document.getElementById('borrowReaderSelect');
            
            bookSelect.innerHTML = '<option value="">-- –ò–∑–±–µ—Ä–∏ –∫–Ω–∏–≥–∞ --</option>';
            books.filter(b => b.available).forEach(book => {
                bookSelect.innerHTML += `<option value="${book.id}">${book.title} - ${book.author}</option>`;
            });
            
            readerSelect.innerHTML = '<option value="">-- –ò–∑–±–µ—Ä–∏ —á–∏—Ç–∞—Ç–µ–ª --</option>';
            readers.forEach(reader => {
                readerSelect.innerHTML += `<option value="${reader.id}">${reader.firstName} ${reader.lastName} (${reader.grade}${reader.class})</option>`;
            });
        }

        function returnBook(bookId) {
            const book = books.find(b => b.id === bookId);
            if (book) {
                book.available = true;
                book.borrowedBy = null;
                displayBooks();
                displayBorrowedBooks();
                updateBorrowSelects();
                alert(`–ö–Ω–∏–≥–∞—Ç–∞ "${book.title}" –µ –≤—ä—Ä–Ω–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ!`);
            }
        }

        function deleteBook(bookId) {
            if (confirm('–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ, —á–µ –∏—Å–∫–∞—Ç–µ –¥–∞ –∏–∑—Ç—Ä–∏–µ—Ç–µ —Ç–∞–∑–∏ –∫–Ω–∏–≥–∞?')) {
                books = books.filter(b => b.id !== bookId);
                displayBooks();
                alert('–ö–Ω–∏–≥–∞—Ç–∞ –µ –∏–∑—Ç—Ä–∏—Ç–∞!');
            }
        }

        function deleteReader(readerId) {
            const hasBooks = books.some(b => b.borrowedBy === readerId);
            if (hasBooks) {
                alert('–ù–µ –º–æ–∂–µ –¥–∞ –∏–∑—Ç—Ä–∏–µ—Ç–µ —á–∏—Ç–∞—Ç–µ–ª, –∫–æ–π—Ç–æ –∏–º–∞ –∑–∞–µ—Ç–∏ –∫–Ω–∏–≥–∏!');
                return;
            }
            if (confirm('–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ, —á–µ –∏—Å–∫–∞—Ç–µ –¥–∞ –∏–∑—Ç—Ä–∏–µ—Ç–µ —Ç–æ–∑–∏ —á–∏—Ç–∞—Ç–µ–ª?')) {
                readers = readers.filter(r => r.id !== readerId);
                displayReaders();
                alert('–ß–∏—Ç–∞—Ç–µ–ª—è—Ç –µ –∏–∑—Ç—Ä–∏—Ç!');
            }
        }

        function updateDashboard() {
            document.getElementById('totalBooks').textContent = books.length;
            document.getElementById('availableBooks').textContent = books.filter(b => b.available).length;
            document.getElementById('borrowedBooks').textContent = books.filter(b => !b.available).length;
            document.getElementById('totalReaders').textContent = readers.length;
            
            const tbody = document.getElementById('recentBorrowsBody');
            tbody.innerHTML = '';
            
            const borrowed = books.filter(b => !b.available).slice(0, 5);
            borrowed.forEach(book => {
                const reader = readers.find(r => r.id === book.borrowedBy);
                if (reader) {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${book.title}</td>
                        <td>${book.author}</td>
                        <td>${reader.firstName} ${reader.lastName}</td>
                        <td>${reader.grade}${reader.class}</td>
                    `;
                    tbody.appendChild(tr);
                }
            });
        }

        document.getElementById('searchBooks').addEventListener('input', (e) => {
            displayBooks(e.target.value);
        });

        document.getElementById('searchReaders').addEventListener('input', (e) => {
            displayReaders(e.target.value);
        });

        updateDashboard();
        displayBooks();
        displayReaders();
        updateBorrowSelects();
    </script>
</body>
</html>